{% load staticfiles  %}
<html class="js">
    <head>
            <!-- General Head Content -->
            <!-- meta tags -->
            <meta charset="utf-8">
            <!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1' /><![endif]-->

            <meta name="description" content="Building robust web apps is simple with timelines, profiles, notifications, messages, activity, and new utility classes.">

            <meta name="viewport" content="width=device-width, initial-scale=1">
            <!-- title tag-->
            <title>
            </title>

            <!-- styles -->
            <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600" rel="stylesheet" type="text/css">
            <link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
            <link href="//netdna.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
            <link rel="stylesheet" type="text/css" href="{% static 'workon/vendors/colpick/colpick.css' %}">

            <link rel="stylesheet" type="text/css" href="{% static 'workon/admin/css/admin.css' %}">

            <!--[if lt IE 9]>
            <script src="//html5shiv.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
            <![endif]-->

    </head>

    <body
        class="{{ request.resolver_match.namespace }}-{{ request.resolver_match.url_name }}"

    >


        {% block body %}


            <div class="navbar navbar-default user-nav" id="navbar">
                {% block navbar %}
                    {% include "workon/admin/main/_navbar.html" %}
                {% endblock navbar %}
            </div>


            <div id="content" >
                <section id="sidebar">
                    {% block sidebar %}
                        {% include "workon/admin/main/_sidebar.html" %}
                    {% endblock sidebar %}
                </section>
                <section id="topbar">
                    <ul id="breadcrumb" class="breadcrumb">
                        {% block breadcrumb %}
                            <li class="title">Dashboard</li>
                            <li><a href="#">Lorem</a></li>
                            <li class="active"><a href="#">ipsum</a></li>
                        {% endblock breadcrumb %}
                    </ul>
                    <div id="toolbar">
                        {% block toolbar %}{% endblock toolbar %}
                    </div>
                </section>
                <div id="main">
                    {% block main %}{% endblock main %}
                </div>
            </div>

            <!-- General JavaScript -->
            <!-- jquery.js -->
            <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js" type="text/javascript"></script>
            <script src="https://cdn.jsdelivr.net/jquery.ui/1.11.4/jquery-ui.min.js" type="text/javascript"></script>
            <script src="https://cdn.jsdelivr.net/handlebarsjs/4.0.5/handlebars.min.js"></script>

            <!-- bootstrap.js -->
            <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js" type="text/javascript"></script>
            <script src="{% static 'workon/packages/loading.js' %}" type="text/javascript"></script>
            <script src="{% static 'workon/packages/tooltip.js' %}" type="text/javascript"></script>
            <script src="{% static 'workon/packages/highchart.js' %}" type="text/javascript"></script>
            <script src="{% static 'workon/packages/color.js' %}" type="text/javascript"></script>
            <script src="{% static 'workon/packages/isotope.js' %}" type="text/javascript"></script>
            <script src="{% static 'workon/packages/notification.js' %}" type="text/javascript"></script>


            PNotify.prototype.options.styling = "bootstrap3";
            PNotify.prototype.options.animate_speed = "fast";
            PNotify.prototype.options.fallback = true;
            PNotify.prototype.options.nonblock = {
                nonblock: true,
                nonblock_opacity: .2
            };
            {% if messages %}

                // PNotify.prototype.options.desktop = {
                //     desktop: true,
                //     icon: '{{ STATIC_URL }}img/logo.png?1'
                // };
                $(document).ready(function() {
                    //PNotify.desktop.permission();
                    {% for message in messages %}
                        (function(notify){
                            var title_text = "{{message|escapejs}}".split('|');
                            var tags = "{{message.tags}}".split(' ');
                            var config = {
                                title:  title_text.length >= 2 ? title_text[0] : '',
                                text:  title_text.length >= 2 ? title_text[1] : title_text[0],
                                type: tags.join(' '),
                                // icon: 'glyphicon glyphicon-envelope',
                            }
                            console.log(tags.indexOf('permanent') > -1)
                            if(tags.indexOf('permanent') > -1)
                            {
                                config.hide = false;
                                notify = new PNotify(config);
                            }
                            else
                            {
                                config.delay = 3000;
                                notify = new PNotify(config).get().click(function(e) {
                                    notify.remove()
                                });
                            }
                            console.log(config)

                        })();
                    {% endfor %}
                });
            {% endif %}

            <script src="{% static 'main/flow.js' %}" type="text/javascript"></script>
            <script src="{% static 'main/main.js' %}" type="text/javascript"></script>
            <script src="{% static 'main/modal.js' %}" type="text/javascript"></script>
            <script src="{% static 'main/form.js' %}" type="text/javascript"></script>


            <!--<script src="{% static 'main/application/project.js' %}" type="text/javascript"></script>
            <script src="{% static 'main/application/member.js' %}" type="text/javascript"></script>
            <script src="{% static 'main/application/task.js' %}" type="text/javascript"></script>
            <script src="{% static 'main/application/idea.js' %}" type="text/javascript"></script>-->

            <script src="{% static 'incident/incident.js' %}" type="text/javascript"></script>
            <script src="{% static 'incident/tracker.js' %}" type="text/javascript"></script>

            <script>


                $('html').removeClass('no-js').addClass('js')

                $(document).ready(function(flow)
                {
                    window.flow.init();
                    window.flow.connect();
                });

            </script>

        {% endblock body %}

        {% block js %}
        {% endblock js %}
        </body>
</html>